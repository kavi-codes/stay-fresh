<div class="body-fridge">
 <% if @expiry_notifications.length > 0 %>
    <p><%='Ingredients are expiring'%></p>
 <% end %>
<%= link_to "+", new_fridge_ingredient_path(@fridge), class: "button-round" %>
<h1 class="text-center py-4 fridge-show-title"><%= @fridge.name %></h1>
<h2><%= link_to "Add people to your fridge",  new_fridge_invite_notification_path(@fridge), class: "add-people-button" %></h2>

<%= form_tag fridge_path(@fridge), method: :get, class: "d-flex", id:"searchbar" do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form-control searchbar-input-show",
    placeholder: "Ingredient"
  %>
  <%= select_tag "sort", options_for_select(["expiry date", "category"], params[:sort]), class: "button-secondary" %>
  <%= submit_tag "Search", class: "searchbar" %>
<% end %>
<div class="container-ingredients">
  <% @ingredients.each do |ingredient| %>
  <div class="ingredient-card" data-controller="collapse" data-action="click->collapse#showmore">
    <div class="left-card" data-collapse-target="description">
      <div class="">
        <p class="ingredients-font ingredient-card-details"><%= ingredient.name %></p>
        <p class="expiry-font ingredient-card-details"><%= "exp in #{(ingredient.exp_date - Date.today).to_i} days" %></p>
        <% if ingredient.how_long >= 0 && ingredient.how_long <= 2 %>
          <p><%='Expiring soon'%></p>
        <% end %>
      </div>
      <div class="d-none" data-collapse-target="ingredients">
        <p class="ingredients-font"><%= ingredient.category %></p>
        <p class="expiry-font"><%= ingredient.quantity %> <%= ingredient.unit %></p>
        <p class="comment"><%= ingredient.comment %>
      </div>
    </div>

    <div class="right-card">
      <div>
        <%= link_to "Update", edit_fridge_ingredient_path(@fridge,ingredient), class:"button-action" %>
      </div>
      <div>
        <p><%= link_to "Delete", ingredient_path(ingredient), class:"button-action", data: { turbo_method: :delete, turbo_confirm: "Are you sure"} %></p>
      </div>
    </div>
  </div>
<% end %>
</div>
<div class="buffer">
</div>
</div>
