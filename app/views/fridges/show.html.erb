<div class="body-fridge">
<%= link_to "+", new_fridge_ingredient_path(@fridge), class: "button-round" %>
<h1 class="text-center py-4"><%= @fridge.name %></h1>
<%= form_tag fridge_path(@fridge), method: :get, class: "d-flex", id:"searchbar" do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form-control",
    placeholder: "Find an ingredient"
  %>
  <%= submit_tag "Search", class: "btn btn-primary" %>
<% end %>
<%= select_tag "sort", options_for_select(["expiry date", "category"], params[:sort]), class: "button-secondary" %>
<div class="container-ingredients">
  <% @ingredients.each do |ingredient| %>
  <div class="ingredient-card" data-controller="collapse" data-action="click->collapse#showmore">
    <div class="left-card" data-collapse-target="description">
      <div class="">
        <p class="ingredients-font ingredient-card-details"><%= ingredient.name %></p>
        <p class="expiry-font ingredient-card-details"><%= "exp in #{(ingredient.exp_date - Date.today).to_i} days" %></p>
      </div>
      <div class="d-none" data-collapse-target="ingredients">
        <p class="ingredients-font"><%= ingredient.category %></p>
        <p class="expiry-font"><%= ingredient.quantity %> <<%= ingredient.unit %></p>
        <p class="comment"><%= ingredient.comment %>
      </div>
    </div>

    <div class="right-card">
      <div>
        <%= link_to "Update", edit_fridge_ingredient_path(@fridge,ingredient), class:"button-action" %>
      </div>
      <div>
        <p><%= link_to "Delete", ingredient_path(ingredient), class:"button-action", data: { turbo_method: :delete, turbo_confirm: "Are you sure"} %></p>
      </div>
    </div>
  </div>
<% end %>
</div>
<div class="d-flex gap-2 flex-column align-items-center mt-3">
  <%= link_to "Add ingredient", new_fridge_ingredient_path(@fridge), class: 'btn button-primary py-3' %>

  <%= link_to 'Back to all fridges', root_path, class: 'btn button-primary py-3' %>
</div>
<div class="buffer">
</div>
